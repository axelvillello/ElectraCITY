# ElectraCITY
### A digital version of the ElectraCITY activity by the [Science and Engineering Challenge](https://www.newcastle.edu.au/college/engineering-science-environment/education/science-and-engineering-challenge/our-activities) 
---
## Overview
**Authors:** James Davies, Axel Ello <br>
**Game Engine:** Unity <br>
**Description:**
- Draw electricity from the generators to power the city! 
- Connect wires between buildings to extend the powerline and score points based on the powered building
- Challenge yourself with 3 levels of difficulty and options to remove different kinds of wires
## Project Structure of Main Files
**/Assets/Audio** - Audio files  <br>
**/Assets/Colorblind Effect** - Colorblind filter files  <br>
**/Assets/Images** - Miscellaneous sprites including UI elements and power generators  <br>
**/Assets/Images/BG Objects** - Background object sprites  <br>
**/Assets/Images/Consumers** - Consumer object sprites (buildings)  <br>
**/Assets/Prefabs** - Prefabricated game objects <br>
**/Assets/Resources** - Miscellaneous files, currently contains JSON for tutorial dialogue <br>
**/Assets/Scenes** - .Unity files for each game scene <br>
**/Assets/Scripts** - C# scripts <br>
## Prefabs
### BGObject
Background objects for the main game scene. Composed of a blank square sprite. Upon starting a game session, a number of these objects are generated via Global.cs with a random sprite. <br>
### Connector 
Circles that generate below consumers and generators, allowing for wires to be attached between these objects. 1-3 are generated per object randomly via Global.cs. <br>
### Consumer
Consumer objects for the main game scene (buildings). They provide score when power is successfully supplied to them. These are composed of a large blank square to hold the consumer's main sprite, a lightbulb prefab that communicates if the consumer has received power, and a smaller square with a text element to hold the consumer's score. These are randomly generated in Global.cs with the amount of consumers dictated by conCount in Scenario.cs. <br>
### Generator 
Generator objects for the main game scene. They provide power to connected consumers. These are composed of a preset generator sprite. The amount of these per generated scenario is dictated by genCount in Scenario.cs. <br>
### Global
Gameobject for storing "global" functions for main game logic in the main scene. Composed of Global.cs. <br>
### OptionsMenu
Options menu UI used in both game scenes. Contains various options that store values in an object that uses StaticValues.cs to determine global variables throughout runtime. <br>
### UI
Main game scene UI. Contains background image and wire options. <br>
## Scenes
### Menu.unity
Main menu scene. Main navigation options include a button to the "Tutorial" (scene changes), "Start" to open the start menu and "Options" to open the options menu. The start menu contains a drop down to select difficulty, check boxes for red and yellow wires, and a field for entering the generation seed. Beginning a game session from here will write these values to StaticValues which are then used by Global to generate the Electracity_Board.unity scene. Selecting the tutorial generates similarly to the start menu, however the Tutorial game object in game board scene will be active. <br>
### Electracity Board.unity
Main game scene. Contains all consumers and generators with connectors that are generated by Global. Global also allows for game logic to apply to the scene, including the tracking of powerlines and their score from generators that are connected to consumers via Generators.cs, and the power status of consumers via Consumers.cs. The Tutorial game object has a component for Tutorial.cs. This is only active when tutorial is selected, and contains children including a dialogue box that reads from Tutorial.json in Dialogue.cs to display text sequentially and a cursor that appears during certain lines of dialogue. 
## Main Systems
### Generation
| Source File | Usage |
| --- | --- |
| Global.cs | Contains logic for randomly generating the game board with regards selected difficulty, and generation seed. |
| StaticValues.cs | Contains seed, the integer that defines the selected difficulty, and availability of each wire type. |
| Scenario.cs | Variables set to define a scenario based on the difficulty selected. Maintains the number of generators, number of consumers and available wires for the generated scenario. |
| GridObject.cs | Definition of a 2D grid to occupy generated objects. Used to check if grid spaces are currently occupied to ensure no clipping of objects. |
| ConnectorGen.cs | Generates connector dots below after the generation of power generator and consumer prefabs. |
| Consumers.cs | Randomly assign point values of each consumer is set to a unique instance of this class per consumer object. |
### Power Management
| Source File | Usage |
| --- | --- |
| Global.cs | Medium for communicating game actions that change the status of powered objects. |
| Generators.cs | Manages objects connected in a line with by finding all consumers connected to a generator to form a powerline. The value of power supplied to each consumer is managed here. Each consumer is represented using Node.cs. |
| Node.cs | Representation of an individual object within a powerline tree. Maintains the object's resistance. |
| Consumers.cs | Maintains the power status of individual objects including the amount of power supplied and if the consumer is considered as powered on. |
| AudioManager.cs | Plays a sound if power status of a consumer is changed. Sounds for powering on and off are unique. |
### Wire Mechanics 
| Source File | Usage |
| --- | --- |
| WireAttach.cs | Logic for maintaining the values that define different types of wires when selecting wires and attaching wires to a connector. |
| WireConnection.cs | Logic for gameplay behaviours when connecting a wire to a connector(s) under various circumstances. Handles rendering of wires based on wire selected. |
| Global.cs | Contains variables defined by logic in WireAttach.cs to be used by WireConnection.cs. |
### Scoring
| Source File | Usage |
| --- | --- |
| Global.cs | Calculates the total score of powerlines, and score penalty of used wires. Values are provided by Generators.cs. |
| Consumers.cs | Determines the base score of an individual consumer object. | 
| Generators.cs | Calculates total cost of wires used within a powerline in regards to the wire type and length of wire used as defined in Node.cs. |
| Node.cs | Contains cost of wire placed into a node and the length of the wire used. |
| UI.cs | Updates game UI to display the score to the user. |
### Tutorial
| Source File | Usage |
| --- | --- |
| Global.cs | Manages whether tutorial components are to be used in the scenario and generates accordingly. |
| Tutorial.cs | Behaviours for the cursor object in the tutorial involving it's relocation and visibility during certain dialogue steps. |
| Dialogue.cs | Behaviours for the dialogue box within the tutorial. Populates dialogue box with tutorial text from Tutorial.json. Indicates when dialogue can be clicked through. |
### Menus & Settings
| Source File | Usage |
| --- | --- |
| StaticValues.cs | Global variables for each setting in the options menu. |
| MenuButtons.cs | Defines behaviour of menu navigations, including specific interactions for the start scenario, options menu and tutorial buttons. Includes specific behaviours hovering over interactable UI components. |
| AudioManager.cs | Method for loading and playing all used sounds. |
| ColorblindManager.cs | Maintains the application of different color filters based on selected values. |
| ColorLoader.cs | Reloads the color filter for the main menu scene. |
| FontLoader.cs | Reloads font of text components that are inactive in a loaded scene. |
| FontManager.cs | Maintains the currently selected font and applies it to all text components. |
| LiveVolume.cs | Maintains the volume of played audio and enables this value to be changed in realtime. |
| OptionsFonts.cs | Listener class for font manager when selecting fonts in the options menu. |
| ResultsScreen.cs | Populates the results screen with the score values from Global.cs. |
| Tooltips.cs | Tooltip components that appear on hovering over the gameobject it's attached to.  |
| TxtSpeedManager.cs | Maintains the speed of dialogue text scroll in Dialogue.cs. |
